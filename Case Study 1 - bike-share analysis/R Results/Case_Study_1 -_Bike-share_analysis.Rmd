---
title: "Case Study 1 - Bike-share analysis"
author: "Matt Johnson"
email: "matt.johnson0304@gmail.com"
linkedin: "https://www.linkedin.com/in/matt-johnson0304/"
date: "2023-06-23"
output: html_document  
---

## Introduction:

Welcome to the Cyclistic bike-share analysis case study! Here, we will tackle real-world challenges faced by Cyclistic, a bike-share company based in Chicago. Throughout this study, we will follow the data analysis process to answer key business questions and develop actionable insights.


### Deliverables:

The company's director of marketing, Lily Moreno, believes that the future success of Cyclistic relies on maximizing the number of annual memberships. To achieve this, we aim to understand the differences in behavior between casual riders and annual members and leverage these insights to design a new marketing strategy. We need to:

<ol>

<li>Gain a comprehensive understanding of the distinct behaviors and preferences exhibited by annual members and casual riders.</li>

<li>Develop an innovative and targeted marketing strategy that effectively converts casual riders into loyal annual members.</li>

<li>Strengthen our thesis and marketing recommendations by supporting them with compelling data insights and professional data visualizations.</li>

</ol>

<strong> Ultimately, our overarching goal is to drive the conversion of casual riders into devoted annual members, foster long-term loyalty, and maximize the growth of Cyclistic .</strong>

* Our specific task is to answer <em>"How do annual members and casual riders use Cyclistic bikes differently?"</em>


Assumptions and Theories:
Based on the information provided, we can make some initial assumptions and theories. We may assume that annual members and casual riders exhibit distinct patterns in bike usage, ride duration, and frequency. It is plausible to theorize that annual members, being more committed, would have longer average ride durations and a higher usage frequency compared to casual riders. Additionally, we can speculate that factors such as cost-effectiveness, convenience, and exclusive benefits may motivate casual riders to transition into annual


## Ask

These three questions will guide the marketing program.

1. How do annual members and casual riders use Cyclistic bikes differently?
* The casual and rider differ regarding average ride length. The total average of the ride length for the members was about 3000 seconds less than the casual
* The total Number of members comes out to a little over 61k while the casual is a little over 23k.
* Favorite station to go from for members is at Latrobe Ave & Chicago Ave
* Favorite station to go from for casuals is at Wabash Ave & Grand Ave.


2. Why would casual riders buy Cyclistic annual memberships?
* Casual riders would buy annual memberships if there were more incentives as an annual member. 


3. How can Cyclistic Use digital media to influence casual riders to become members?
* You can create certain marketing plans that allow the users to gain achievements the more they ride. 
* Other plans could involve creating competitions as top riders which in turn receive rewards of some sort.


 
#### My Report will produce the following deliverables:

1. A clear statement of the business task
2. A description of all data sources used
3. Documentation of any cleaning or manipulation of data
4. A summary of your analysis
5. Supporting visualizations and key findings
6. Your top three recommendations based on your analysis

### Guiding questions

What is the problem you are trying to solve - I am trying to solve the
problem of converting Cyclistic casual riders to annual members.

How can my insights drive business decisions - I can depict the
important KPIs. Report visuals that could track travel and purchase.
behavior. Possibly incorporate incentives for when you ride certain.
distances. Comparing and contrasting data regarding riding time and
location of stations. How one might choose one station over another.
Quality of neighborhood could have an impact. (Think in and out of this
box. could possibly use outside data from other sources)

### Business Task Statement

The business task is to design marketing strategies aimed at converting.
casual riders into annual members for Cyclistic, a bike-sharing program
in Chicago. The marketing analyst team needs to understand the
differences between annual members and casual riders, determine why.
casual riders would purchase a membership and explore how digital media.
could impact their marketing tactics. To achieve this, they plan to
analyze the historical bike trip data from Cyclistic to identify trends.
and insights.


### Further Analysis
(These points coincide with the recommendation points. For example, points (a & 1 coincide))

a. We need to see the difference of distance between the causal and member users. This could play a big factor as to why some prefer casual over member and how to convert more annual members. So, think about what the average traveler’s distance from point A to B is and how that plays into their membership. There could be a correlation.
b. As a consumer you must think the most users compare the price points with casual vs member. The annual membership should be sweet enough to where more than most casual riders will see that you might as well become an annual member. 
c. You ultimately want users to bike as often as possible. This is where you can get creative with your users. Users should receive incentives more biking more or for reaching milestones in distance traveled. You can create competitions to where users achieve certain benefits for having the most miles or kilometers in a single month. This can go hand in hand with tracking calories.
d. You need to create a cost benefit analysis on the stations that are getting used the least. There might be some that are in low volume areas where it’s not worth the cost of having it at that location. You might need Look into relocating stations as well. If there is a specific distance between certain stations, it could be cost-beneficial to the user, and this could ultimately convert more annual memberships.
e. Attack the easiest customer base you have. This is your current users (Casuals). Market to the casual users and give them simple one or two analytics that show how they can save from switching over. Also, show them the benefit of becoming an annual member by enticing them with a free trial run and letting them see how it differs.
f. Another way to potentially gain new customers is to find out where there is a lot of foot traffic with walking/ bike trails. You could possibly funnel new customers to becoming casual members. 
g. You can potentially connect with local businesses that may offer up perks if you shop with them by using Bike share. For example, if a user gets $1 off a coffee at a shop 2-3 miles down the street this would be beneficial for both parties. 


## Recommendations (Data/Business Analysis)
1. Bike share needs data in regarding the distance traveled. 
2. You need to make being a member worth the riders while.
3. Create higher incentives for people to bike.
4. Cost benefit analysis on stations that are not getting used. Low hanging fruit might have to be removed. (Think longer time horizon here)
5. Market to casual users first then annual members second.
6. Market Bike Share near high volume walking/ bike trails to add new customers.
7. Connect with the community.


### Excel Results
https://github.com/MjxSjx/Portfolio/blob/main/Case%20Study%201%20-%20bike-share%20analysis/Excel%20Results/Case%20Study%201%20-%20Excel%20Results.PNG

### 30 SQL Query Results
https://github.com/MjxSjx/Portfolio/tree/main/Case%20Study%201%20-%20bike-share%20analysis/SQL%20Results

### Additional R Results graphed in Excel
https://github.com/MjxSjx/Portfolio/blob/main/Case%20Study%201%20-%20bike-share%20analysis/R%20Results/R_Export_Summary_File_Results_in_Excel.PNG

### Tableau Visualization Analysis
https://public.tableau.com











```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r Install package, include=FALSE}
#install.packages("tidyverse")
```


```{r Load package, include=FALSE}
library(tidyverse)
```


``` {r Upload datasets, include=FALSE}
db1 <- read_csv("202205-tripdata.csv")
db2 <- read_csv("202206-tripdata.csv")
db3 <- read_csv("202207-tripdata.csv")
db4 <- read_csv("202208-tripdata.csv")
db5 <- read_csv("202209-tripdata.csv")
db6 <- read_csv("202210-tripdata.csv")
db7 <- read_csv("202211-tripdata.csv")
db8 <- read_csv("202212-tripdata.csv")
db9 <- read_csv("202301-tripdata.csv")
db10 <- read_csv("202302-tripdata.csv")
db11 <- read_csv("202303-tripdata.csv")
db12 <- read_csv("202304-tripdata.csv")
```


``` {r Stack individual data frames into one big data frame}
all_trips <- bind_rows(db1,db2,db3,db4,db5,db6,db7,db8,db9,db10,db11,db12)
```


``` {r Remove lat and long}
all_trips <- all_trips %>% select(-c(start_lat, start_lng, end_lat, end_lng))
```


``` {r Making ride_length the col_type the instructions want}
all_trips$ride_length <- as.numeric(as.POSIXlt(all_trips$ride_length, format = "%H:%M:%S"))
```


``` {r Inspect the new table that has been created}
colnames(all_trips)  #List of column names
nrow(all_trips)  #How many rows are in data frame?
dim(all_trips)  #Dimensions of the data frame?
head(all_trips)  #See the first 6 rows of data frame.  Also tail(all_trips)
str(all_trips)  #See list of columns and data types (numeric, character, etc)
summary(all_trips)  #Statistical summary of data. Mainly for numerics
```


```{r Add columns that list the date, month, day, and year of each ride}
all_trips$date <- as.Date(all_trips$started_at, format = "%m/%d/%Y %H:%M") 
all_trips$month <- format(as.Date(all_trips$date), "%m")
all_trips$day <- format(as.Date(all_trips$date), "%d")
all_trips$year <- format(as.Date(all_trips$date), "%Y")
all_trips$day_of_week <- format(as.Date(all_trips$date), "%A")
```


``` {r Remove "bad" data}
all_trips_v2 <- all_trips[!(all_trips$start_station_name == "HQ QR" | all_trips$ride_length<0),]
```


``` {r Descriptive analysis on ride_length (all figures in seconds)}
mean(all_trips_v2$ride_length) 
median(all_trips_v2$ride_length) 
max(all_trips_v2$ride_length) 
min(all_trips_v2$ride_length)
```


``` {r You can condense the four lines above to one line using summary() on the specific attribute}
summary(all_trips_v2$ride_length)
```


``` {r Compare members and casual users}
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = mean)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = median)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = max)
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual, FUN = min)
```


``` {r the days of the week are out of order. we must fix that.}
all_trips_v2$day_of_week <- ordered(all_trips_v2$day_of_week, 
  levels=c("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"))
```


``` {r See the average ride time by each day for members vs casual users rounded up to make it easier to understand} 
aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week, FUN = function(x) round(mean(x), 2))
```


``` {r we must format "started_at" to utilize further investigations}
all_trips_v2 <- all_trips_v2 %>%
  mutate(started_at = as.POSIXct(started_at, format = "%m/%d/%Y %H:%M"))
```


``` {r analyze ridership data by type and weekday}
all_trips_v2 %>%
  mutate(weekday = wday(started_at, label = TRUE)) %>%
  group_by(member_casual, weekday) %>%
  summarise(
    number_of_rides = n(),
    average_duration = mean(ride_length)
  ) %>%
  arrange(member_casual, weekday)
```


``` {r visualize the number of rides by rider type}
all_trips_v2 %>%
  mutate(weekday = wday(started_at, label = TRUE)) %>%
  group_by(member_casual, weekday) %>%
  summarise(
    number_of_rides = n(),
    average_duration = mean(ride_length)
    ) %>%
  arrange(member_casual, weekday) %>%
  ggplot(aes(x = weekday, y = number_of_rides, fill = member_casual)) +
  geom_col(position = "dodge") +
  scale_y_continuous(labels = scales::comma) +
  labs(title = "Total Annual Rides by Weekday")
```


``` {r create a visualization for average duration in minutes}
all_trips_v2 %>%
  mutate(weekday = wday(started_at, label = TRUE)) %>%
  group_by(member_casual, weekday) %>%
  summarise(
    number_of_rides = n(),
    average_duration = mean(ride_length)
    ) %>%
  arrange(member_casual, weekday) %>%
  ggplot(aes(x = weekday, y = average_duration / 60, fill = member_casual)) +
  geom_col(position = "dodge") +
  scale_y_continuous(labels = scales::comma) +
  labs(title = "Average Annual Ride Duration by Weekday", y = "Average Duration (minutes)")
```


``` {r Create a csv file that we will visualize in Excel and Tableau,include=FALSE}
counts <- aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week, FUN = mean)

file_path <- "D:/Merit/Merit Projects/Previous 12 months of trip data - CSV/avg_ride_length.csv"

write.csv(counts, file = file_path, row.names = FALSE)
```


``` {r Create a csv file that we will visualize in Excel and Tableau, include=FALSE}
counts <- aggregate(all_trips_v2$ride_length ~ all_trips_v2$member_casual + all_trips_v2$day_of_week, FUN = mean)

file_path <- "Your_destination/avg_ride_length.csv"

write.csv(counts, file = file_path, row.names = FALSE)
```
